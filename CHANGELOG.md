# Changelog

## v1.3.0

### 改进

- 迁移至框架原生子命令系统，`/contact` 自动显示命令帮助树
- 统一通知文案格式
- 优化 Master 接入前限流提示：首条显示配额，末条提示已达上限

### 移除

- `/contact help`（由框架自动生成帮助替代）
- `/contact start [消息]`（附带首条消息功能）

## v1.2.0

### 新功能

- 转发模式重构：`/contact forward` 进入，`/contact forward done` 结束，无需预先指定消息条数
- 私聊用户有活跃会话时直接发消息即可转发，无需回复 bot
- Master 接入前消息限流（`unclaimed_limit`），防止用户刷屏

### 改进

- 转发模式改为空闲超时，持续发消息不会被中断
- 私聊和群聊场景自动适配回复提示
- 精简 Master 转发结束时用户收到的通知

### 配置变更

- 移除 `send_max`、`send_timeout`
- 新增 `forward_timeout`（原 `send_timeout`，默认 300 秒）
- 新增 `unclaimed_limit`（默认 3 条）

## v1.1.1

### 新功能

- 允许在群聊中区分具体 Master(sender_id)

## v1.1.0

### 新功能

- 新增 `/contact start [消息]` 子命令，发起联系时可附带首条消息
- 新增 `/contact send <n>` 发送模式，批量转发接下来的 n 条消息
- 新增 `/contact cancel` 取消发送模式
- 新增 `/contact help` 显示帮助（`/contact` 默认显示帮助）
- 会话超时时通知用户和 Master
- 用户主动结束会话时通知已接入的 Master

### 改进

- 转发消息统一添加回复提示后缀（`------\n回复本条消息...`）
- 发送模式下前缀、内容、后缀作为独立消息发送，内容原样转发
- 发送模式转发失败时不终止，替换为 `[本消息存在异常，转发失败]`
- 统一组件提取逻辑，确保消息格式一致
- 发送模式进度提示包含会话标签和操作说明
- 优化命令提示文案，提升用户友好度
- 提取公共方法，消除重复代码

## v1.0.0

初次发布。
